Preserve <use>d colors.

===

<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 80">
  <defs>
    <g id="a">
      <rect width="18" height="18" fill="currentColor"/>
    </g>
    <g id="b" color="blue">
      <rect width="18" height="18" fill="currentColor"/>
    </g>
    <g id="c">
      <rect width="18" height="18" fill="currentColor"/>
    </g>
    <g id="d">
      <g color="yellow">
        <rect width="18" height="18" fill="currentColor"/>
      </g>
    </g>
    <g id="e">
      <rect width="18" height="18" fill="currentColor"/>
    </g>
  </defs>
  <use href="#a" x="2" y="2" color="red"/>
  <use href="#b" x="22" y="2" color="red"/>
  <use href="#c" x="42" y="2"/>
  <use href="#d" x="62" y="2" color="red"/>
  <g color="red">
    <use href="#e" x="2" y="22"/>
  </g>
</svg>

@@@

<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 80">
  <defs>
    <g id="a">
      <rect width="18" height="18" fill="currentColor"/>
    </g>
    <g id="b" color="blue">
      <rect width="18" height="18" fill="currentColor"/>
    </g>
    <g id="c">
      <rect width="18" height="18"/>
    </g>
    <g id="d">
      <g color="yellow">
        <rect width="18" height="18" fill="currentColor"/>
      </g>
    </g>
    <g id="e">
      <rect width="18" height="18" fill="currentColor"/>
    </g>
  </defs>
  <use href="#a" x="2" y="2" color="red"/>
  <use href="#b" x="22" y="2"/>
  <use href="#c" x="42" y="2"/>
  <use href="#d" x="62" y="2"/>
  <g color="red">
    <use href="#e" x="2" y="22"/>
  </g>
</svg>
